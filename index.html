<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>√în t·∫≠p GTinKT ‚Äî Mobile</title>
  <script>
    // ====== D·ªÆ LI·ªÜU C√ÇU H·ªéI ======
    const QUESTIONS_ORIGINAL = [{"id": 1, "text": "Cho h√†m s·ªë \\(f(x)=\\begin{cases}\\dfrac{\\sqrt{2x-1}-1}{x^2-1}, & x\\ne 1\\\\ ax-4, & x=1\\end{cases}\\). H√£y t√¨m \\(a\\) ƒë·ªÉ h√†m s·ªë li√™n t·ª•c t·∫°i \\(x_0=1\\).", "choices": ["\\(\\frac92\\)", "\\(\\frac94\\)", "\\(\\frac12\\)", "\\(\\frac23\\)"], "correct": null}, {"id": 2, "text": "Bi·∫øt \\(\\lim_{x\\to 0}\\dfrac{f(x)}{x}=4\\). T√≠nh \\(L=\\lim_{x\\to 0}\\dfrac{f(2x)}{\\tan 3x}\\).", "choices": ["\\(\\frac{8}{3}\\)", "\\(\\frac{20}{3}\\)", "\\(\\frac{2}{5}\\)", "\\(\\frac{20}{2}\\)"], "correct": null}, {"id": 3, "text": "Cho \\(f(e^2)=4\\) v√† \\(f'(e^2)=8\\). T√≠nh ƒë·∫°o h√†m c·ªßa \\(h(x)=\\ln\\!\\big(f(x^2)\\big)\\) t·∫°i \\(x_0=e\\).", "choices": ["\\(4\\)", "\\(4e\\)", "\\(2e\\)", "\\(2\\)"], "correct": null}, {"id": 4, "text": "ƒê·∫°o h√†m c·∫•p 20 c·ªßa h√†m s·ªë \\(y=\\sin(2x)\\) l√†?", "choices": ["\\(20!\\,\\sin 2x\\)", "\\(0\\)", "\\(-2^{20}\\sin 2x\\)", "\\(2^{20}\\sin 2x\\)"], "correct": null}, {"id": 5, "text": "Ti·∫øp tuy·∫øn v·ªõi ƒë·ªì th·ªã \\(f(x)=x^3-3x+1\\) song song v·ªõi ƒë∆∞·ªùng th·∫≥ng \\(y=9x\\) c√≥ ph∆∞∆°ng tr√¨nh l√†?", "choices": ["\\(y=9x-1\\) ho·∫∑c \\(y=9x+3\\)", "\\(y=9x-17\\) ho·∫∑c \\(y=9x+15\\)", "\\(y=9x-3\\) ho·∫∑c \\(y=9x+1\\)", "\\(y=9x-15\\) ho·∫∑c \\(y=9x+17\\)"], "correct": null}, {"id": 6, "text": "T√≠nh t√≠ch ph√¢n \\(\\displaystyle \\int \\frac{\\sin x}{1+\\cos^2 x}\\,dx\\).", "choices": ["\\(\\arctan(\\cos x)+C\\)", "\\(\\ln(1+\\cos^2 x)+C\\)", "\\(-\\arctan(\\cos x)+C\\)", "\\(-2\\ln(1+\\cos^2 x)+C\\)"], "correct": null}, {"id": 7, "text": "Cho h√†m t·ªïng chi ph√≠ \\(C(Q)=2Q^3-5Q^2+2000Q+5\\). T√¨m chi ph√≠ bi√™n \\(MC(Q)\\).", "choices": ["\\(6Q^3-10Q^2+2000Q\\)", "\\(6Q^2+10Q+2000\\)", "\\(6Q^2-10Q+2000\\)", "\\(\\frac{Q^4}{2}-\\frac{5Q^3}{3}+1000Q^2+5Q\\)"], "correct": null}, {"id": 8, "text": "Cho h√†m c·∫ßu \\(Q=5000-P\\). G·ªçi \\(R\\) l√† h√†m t·ªïng doanh thu. T√¨m doanh thu bi√™n \\(MR(Q)\\).", "choices": ["\\(5000Q-2Q^2\\)", "\\(2Q-5000\\)", "\\(5000Q-Q^2\\)", "\\(5000-2Q\\)"], "correct": null}, {"id": 9, "text": "DN ƒë·ªôc quy·ªÅn c√≥ h√†m c·∫ßu \\(Q=300-P\\) v√† \\(C(Q)=2Q^3-6Q^2+250Q+4\\). T√¨m h√†m l·ª£i nhu·∫≠n bi√™n (marginal profit).", "choices": ["\\(-6Q^2+10Q+50\\)", "\\(6Q^2-Q+550\\)", "\\(6Q^2-2Q+250\\)", "C·∫£ ba c√¢u tr√™n ƒë·ªÅu sai"], "correct": null}, {"id": 10, "text": "Cho \\(Q_S=5P-70\\), \\(Q_D=-P+110\\). T√≠nh th·∫∑ng d∆∞ s·∫£n xu·∫•t.", "choices": ["6450", "670", "660", "640"], "correct": null}, {"id": 11, "text": "Cho \\(Q_S=5P-70\\), \\(Q_D=-P+110\\). T√≠nh th·∫∑ng d∆∞ ti√™u d√πng.", "choices": ["3650", "3670", "3200", "3300"], "correct": null}, {"id": 12, "text": "Cho \\(Q_S=5P-70\\), \\(Q_D=-P+110\\). T√≠nh ph√∫c l·ª£i x√£ h·ªôi \\((SW)\\).", "choices": ["\\(SW=3860\\)", "\\(SW=3840\\)", "\\(SW=3100\\)", "\\(SW=3340\\)"], "correct": null}, {"id": 13, "text": "Bi·∫øt \\(MR(Q)=100-4Q-6Q^2\\). X√°c ƒë·ªãnh h√†m t·ªïng doanh thu \\(TR(Q)\\) (b·ªè h·∫±ng s·ªë).", "choices": ["\\(TR(Q)=3Q^2+4Q\\)", "\\(TR(Q)=100Q+4Q^2+2Q^3\\)", "\\(TR(Q)=3Q^2+20Q+100\\)", "\\(TR(Q)=-2Q^3-2Q^2+100Q\\)"], "correct": null}, {"id": 14, "text": "T√≠nh t·ªïng chu·ªói \\(\\displaystyle \\sum_{n=1}^{\\infty}\\frac{1}{4n^2-1}\\).", "choices": ["\\(\\frac12\\)", "\\(\\frac13\\)", "\\(\\frac14\\)", "\\(\\frac15\\)"], "correct": null}, {"id": 15, "text": "T·ªâ l·ªá tƒÉng d√¢n s·ªë 1,06%/nƒÉm. NƒÉm 2014 d√¢n s·ªë 90, 728, 900 ng∆∞·ªùi. H·ªèi nƒÉm 2035 d√¢n s·ªë l√† bao nhi√™u? (l√†m tr√≤n ƒë·∫øn h√†ng ngh√¨n)", "choices": ["110.800.456 ng∆∞·ªùi", "113,276,846 ng∆∞·ªùi", "115.120.234 ng∆∞·ªùi", "118.000.676 ng∆∞·ªùi"], "correct": null}, {"id": 16, "text": "G·ª≠i 50 tri·ªáu ƒë·ªìng v√†o ƒë·∫ßu m·ªói th√°ng, l√£i k√©p 1%/th√°ng. Sau bao nhi√™u th√°ng s·ªë ti·ªÅn v∆∞·ª£t 900 tri·ªáu ƒë·ªìng?", "choices": ["16 th√°ng", "17 th√°ng", "18 th√°ng", "19 th√°ng"], "correct": null}, {"id": 17, "text": "ƒê·∫ßu t∆∞ 300 tri·ªáu ƒë·ªìng, l√£i k√©p 12%/nƒÉm, trong 5 nƒÉm. S·ªë ti·ªÅn l√£i nh·∫≠n ƒë∆∞·ª£c l√† bao nhi√™u? (l√†m tr√≤n ngh√¨n ƒë·ªìng)", "choices": ["210,000 tri·ªáu ƒë·ªìng", "228,703 tri·ªáu ƒë·ªìng", "235,500 tri·ªáu ƒë·ªìng", "528,703 tri·ªáu ƒë·ªìng"], "correct": null}, {"id": 18, "text": "T√≠nh t√≠ch ph√¢n \\(I=\\displaystyle \\int \\frac{2\\,dx}{1+\\cos^2 x}\\).", "choices": ["\\(I=\\sin x+C\\)", "\\(I=\\cos x+C\\)", "\\(I=\\cot x+C\\)", "\\(I=\\tan x+C\\)"], "correct": null}, {"id": 19, "text": "Nghi·ªám t·ªïng qu√°t c·ªßa ph∆∞∆°ng tr√¨nh vi ph√¢n \\(y'+y\\tan x=\\frac{1}{\\cos x}\\) l√†:", "choices": ["\\(y=\\cos x+C\\tan x\\)", "\\(y=\\sin x+C\\cos x\\)", "\\(y=\\sin x+C\\cot x\\)", "\\(y=\\cos x+C\\sin x\\)"], "correct": null}, {"id": 20, "text": "Cho \\(P(x,y)=-2x^2-3y^2-2xy+100x+120y-500\\). T√¨m \\((x,y)\\) ƒë·ªÉ l·ª£i nhu·∫≠n t·ªëi ƒëa.", "choices": ["\\(x=10,y=10\\)", "\\(x=20,y=15\\)", "\\(x=18,y=14\\)", "\\(x=14,y=18\\)"], "correct": null}, {"id": 21, "text": "G·ªçi \\(P_5(x)\\) l√† ƒëa th·ª©c Maclaurin b·∫≠c 5 c·ªßa \\(f(x)=\\frac{1}{1-x}\\). K·∫øt qu·∫£ ƒë√∫ng l√†?", "choices": ["\\(1+\\frac{x}{1!}+\\frac{x^2}{2!}+\\frac{x^3}{3!}+\\frac{x^4}{4!}+\\frac{x^5}{5!}\\)", "\\(1+x+x^2+x^3+x^4+x^5\\)", "\\(x+\\frac{x^2}{2}+\\frac{x^3}{3}+\\frac{x^4}{4}+\\frac{x^5}{5}\\)", "\\(1-x+x^2-x^3+x^4-x^5\\)"], "correct": null}, {"id": 22, "text": "T√≠nh t√≠ch ph√¢n suy r·ªông \\(I=\\displaystyle\\int_{-\\infty}^{+\\infty}\\frac{1}{1+x^2}\\,dx\\).", "choices": ["\\(2\\pi\\)", "\\(\\pi\\)", "\\(+\\infty\\)", "\\(0\\)"], "correct": null}, {"id": 23, "text": "X√©t s·ª± h·ªôi t·ª• c·ªßa chu·ªói \\(\\displaystyle \\sum_{n=1}^{\\infty}\\frac{1}{\\sqrt{n}\\,(e^{1/n}-1)}\\).", "choices": ["H·ªôi t·ª•", "Ph√¢n k√¨", "B√°n h·ªôi t·ª•", "H·ªôi t·ª• tuy·ªát ƒë·ªëi"], "correct": null}, {"id": 24, "text": "Mi·ªÅn x√°c ƒë·ªãnh \\(D\\) c·ªßa \\(f(x,y)=\\dfrac{3x+5y}{y^2}\\) l√†", "choices": ["\\(D=\\{(x,y)\\in\\mathbb{R}^2: y\\ne 0\\}\\)", "\\(D=\\{(x,y)\\in\\mathbb{R}^2: 3x+5y\\ne 0\\}\\)", "\\(D=\\{(x,y)\\in\\mathbb{R}^2: y>0\\}\\)", "\\(D=\\{(x,y)\\in\\mathbb{R}^2: 3x+5y>0\\}\\)"], "correct": null}, {"id": 25, "text": "T√≠nh gi·ªõi h·∫°n \\(\\displaystyle \\lim_{(x,y)\\to(0,0)}\\frac{e^{\\sin x-\\cos x}}{\\sin(xy)}\\).", "choices": ["\\(0\\)", "\\(5\\)", "\\(\\frac12\\)", "Kh√¥ng t·ªìn t·∫°i"], "correct": null}];

    // ====== C·∫§U H√åNH ======
    // Th·ªùi gian l√†m b√†i m·∫∑c ƒë·ªãnh (ph√∫t). C√≥ th·ªÉ ƒë·ªïi b·∫±ng URL: ?t=60
    const DEFAULT_MINUTES = 60;

    // N·∫øu mu·ªën CH·∫§M ƒêI·ªÇM, ƒëi·ªÅn ƒë√°p √°n ƒë√∫ng theo TH·ª® T·ª∞ ID g·ªëc (1..25), d·∫°ng 0..3.
    // V√≠ d·ª•: const ANSWER_KEY = {1:0, 2:1, ...};
    const ANSWER_KEY = {"1": 0, "2": 0, "3": 2, "4": 1, "5": 3, "6": 2, "7": 0, "8": 3, "9": 2, "10": 0, "11": 2, "12": 0, "13": 2, "14": 3, "15": 3, "16": 2, "17": 3, "18": 0, "19": 2, "20": 0, "21": 2, "22": 1, "23": 2, "24": 3, "25": 2};
    const SCORE_PER_QUESTION = 0.4;

    // ====== TI·ªÜN √çCH ======
    const $ = (sel) => document.querySelector(sel);

    function shuffle(array) {
      const a = array.slice();
      for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    function parseMinutesFromURL() {
      const p = new URLSearchParams(location.search);
      const t = Number(p.get("t"));
      if (Number.isFinite(t) && t > 0 && t <= 300) return Math.floor(t);
      return DEFAULT_MINUTES;
    }

    function formatTime(sec) {
      const m = Math.floor(sec / 60);
      const s = sec % 60;
      return String(m).padStart(2, "0") + ":" + String(s).padStart(2, "0");
    }

    // ====== TR·∫†NG TH√ÅI ======
    let minutes = parseMinutesFromURL();
    let timeLeft = minutes * 60;
    let timer = null;

    // questions: m·∫£ng ƒë√£ tr·ªôn th·ª© t·ª± + tr·ªôn ƒë√°p √°n (k√®m map)
    let questions = [];
    // answers: l∆∞u theo index c·ªßa questions[] -> choiceIndex (0..3)
    let answers = {};
    let flagged = {};
    let currentIndex = 0;
    let submitted = false;

    // Local storage key (m·ªói ƒë·ªÅ 1 key)
    const STORAGE_KEY = "calc_econ_exam_v1";

    function buildShuffledQuestions() {
      const base = QUESTIONS_ORIGINAL.map(q => ({
        id: q.id,
        text: q.text,
        choices: q.choices.slice()
      }));

      const order = shuffle(base);
      const withChoiceShuffle = order.map(q => {
        const choiceObjs = q.choices.map((txt, idx) => ({ txt, originalIdx: idx }));
        const shuffled = shuffle(choiceObjs);
        return {
          id: q.id,
          text: q.text,
          choices: shuffled.map(x => x.txt),
          mapNewToOld: shuffled.map(x => x.originalIdx)
        };
      });
      return withChoiceShuffle;
    }

    function saveState() {
      const state = {
        minutes,
        timeLeft,
        questions,
        answers,
        flagged,
        currentIndex,
        submitted,
        ts: Date.now()
      };
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }

    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) return false;
        const state = JSON.parse(raw);
        if (!state || !Array.isArray(state.questions)) return false;

        minutes = state.minutes ?? minutes;
        timeLeft = state.timeLeft ?? timeLeft;
        questions = state.questions;
        answers = state.answers ?? {};
        flagged = state.flagged ?? {};
        currentIndex = state.currentIndex ?? 0;
        submitted = !!state.submitted;
        return true;
      } catch (e) {
        return false;
      }
    }

    function resetAll() {
      localStorage.removeItem(STORAGE_KEY);
      minutes = parseMinutesFromURL();
      timeLeft = minutes * 60;
      questions = buildShuffledQuestions();
      answers = {};
      flagged = {};
      currentIndex = 0;
      submitted = false;
      renderAll();
      startTimer();
      saveState();
    }

    // ====== RENDER ======
    function renderHeader() {
      $("#meta").textContent = `ƒê·ªÅ g·ªìm 25 c√¢u ‚Ä¢ Th·ªùi gian: ${minutes} ph√∫t`;
      $("#timer").textContent = formatTime(timeLeft);
      $("#progress").textContent = `${currentIndex + 1} / ${questions.length}`;
      const answeredCount = Object.keys(answers).length;
      $("#answered").textContent = `ƒê√£ ch·ªçn: ${answeredCount}/${questions.length}`;
    }

    function renderQuestion() {
      const q = questions[currentIndex];
      $("#qId").textContent = `C√¢u ${currentIndex + 1}`;
      $("#qText").innerHTML = q.text;

      const list = $("#choices");
      list.innerHTML = "";

      const selected = answers[currentIndex];
      q.choices.forEach((choiceText, i) => {
        const btn = document.createElement("button");
        btn.className = "choice";
        btn.type = "button";
        btn.innerHTML = `<span class="badge">${String.fromCharCode(65 + i)}</span>
                         <span class="ct">${choiceText}</span>`;
        if (selected === i) btn.classList.add("selected");
        btn.addEventListener("click", () => {
          if (submitted) return;
          answers[currentIndex] = i;
          saveState();
          renderQuestion();
          renderHeader();
          typesetMath();
        });
        list.appendChild(btn);
      });

      // Flag
      const isFlagged = !!flagged[currentIndex];
      $("#flagBtn").classList.toggle("on", isFlagged);
      $("#flagBtn").textContent = isFlagged ? "‚òÖ ƒê√£ ƒë√°nh d·∫•u" : "‚òÜ ƒê√°nh d·∫•u";

      // Nav buttons
      $("#prevBtn").disabled = currentIndex === 0 || submitted;
      $("#nextBtn").disabled = currentIndex === questions.length - 1 || submitted;

      $("#jumpInfo").textContent = isFlagged ? "C√¢u n√†y ƒëang ƒë∆∞·ª£c ƒë√°nh d·∫•u ƒë·ªÉ xem l·∫°i." : "";
    }

    function renderGrid() {
      const grid = $("#grid");
      grid.innerHTML = "";
      questions.forEach((_, i) => {
        const b = document.createElement("button");
        b.type = "button";
        b.className = "cell";
        b.textContent = String(i + 1);
        if (i === currentIndex) b.classList.add("active");
        if (answers[i] !== undefined) b.classList.add("answered");
        if (flagged[i]) b.classList.add("flagged");
        b.addEventListener("click", () => {
          if (submitted) return;
          currentIndex = i;
          saveState();
          renderAll();
        });
        grid.appendChild(b);
      });
    }

    function renderSubmitPanel() {
      $("#submitBtn").disabled = submitted;
      $("#resetBtn").disabled = false;
      $("#reviewBtn").disabled = submitted;
      $("#submitBtn").textContent = submitted ? "ƒê√£ n·ªôp b√†i" : "N·ªôp b√†i";
    }

    function renderResult() {
      const box = $("#result");
      box.innerHTML = "";
      if (!submitted) {
        box.classList.add("hidden");
        return;
      }
      box.classList.remove("hidden");

      const total = questions.length;
      const answeredCount = Object.keys(answers).length;

      let scoreBlock = "";
      if (ANSWER_KEY) {
        let correct = 0;
        for (let i = 0; i < total; i++) {
          const q = questions[i];
          const chosen = answers[i];
          if (chosen === undefined) continue;
          const chosenOriginal = q.mapNewToOld[chosen];
          if (ANSWER_KEY[q.id] === chosenOriginal) correct++;
        }
        const score = (correct * SCORE_PER_QUESTION);
        scoreBlock = `<div class="score">S·ªë c√¢u ƒë√∫ng: <b>${correct}/${total}</b> ‚Ä¢ ƒêi·ªÉm: <b>${score.toFixed(1)}/10</b></div>`;
      } else {
        scoreBlock = `<div class="score muted">Ch∆∞a ch·∫•m ƒëi·ªÉm v√¨ ch∆∞a c√≥ ƒë√°p √°n.</div>`;
      }

      const rows = [];
      for (let i = 0; i < total; i++) {
        const chosen = answers[i];
        const chosenLabel = (chosen === undefined) ? "‚Äî" : String.fromCharCode(65 + chosen);
        rows.push(`<div class="sumrow"><span>C√¢u ${i+1}</span><span class="pill">${chosenLabel}</span></div>`);
      }

      box.innerHTML = `
        <h3>K·∫øt qu·∫£ / T√≥m t·∫Øt b√†i l√†m</h3>
        <div class="meta2">ƒê√£ ch·ªçn: <b>${answeredCount}/${total}</b> ‚Ä¢ Th·ªùi gian c√≤n l·∫°i khi n·ªôp: <b>${formatTime(timeLeft)}</b></div>
        ${scoreBlock}
        <div class="sum">${rows.join("")}</div>
      `;
    }

    function typesetMath() {
      if (window.MathJax && window.MathJax.typesetPromise) {
        window.MathJax.typesetPromise();
      }
    }

    function renderAll() {
      renderHeader();
      renderQuestion();
      renderGrid();
      renderSubmitPanel();
      renderResult();
      typesetMath();
    }

    // ====== TIMER ======
    function startTimer() {
      stopTimer();
      $("#timer").textContent = formatTime(timeLeft);
      timer = setInterval(() => {
        if (submitted) return;
        timeLeft--;
        if (timeLeft <= 0) {
          timeLeft = 0;
          $("#timer").textContent = formatTime(timeLeft);
          submitExam(true);
          return;
        }
        $("#timer").textContent = formatTime(timeLeft);
        if (timeLeft % 5 === 0) saveState();
      }, 1000);
    }

    function stopTimer() {
      if (timer) clearInterval(timer);
      timer = null;
    }

    // ====== SUBMIT ======
    function submitExam(auto=false) {
      if (submitted) return;
      submitted = true;
      stopTimer();
      saveState();

      $("#toast").textContent = auto ? "H·∫øt gi·ªù ‚Äî b√†i ƒë√£ ƒë∆∞·ª£c n·ªôp t·ª± ƒë·ªông." : "ƒê√£ n·ªôp b√†i.";
      $("#toast").classList.remove("hidden");
      setTimeout(() => $("#toast").classList.add("hidden"), 2500);

      renderAll();
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // ====== INIT ======
    window.addEventListener("DOMContentLoaded", () => {
      const hasState = loadState();
      if (!hasState) {
        questions = buildShuffledQuestions();
        saveState();
      }
      renderAll();
      if (!submitted) startTimer();

      $("#prevBtn").addEventListener("click", () => {
        if (submitted) return;
        if (currentIndex > 0) {
          currentIndex--;
          saveState();
          renderAll();
        }
      });

      $("#nextBtn").addEventListener("click", () => {
        if (submitted) return;
        if (currentIndex < questions.length - 1) {
          currentIndex++;
          saveState();
          renderAll();
        }
      });

      $("#flagBtn").addEventListener("click", () => {
        if (submitted) return;
        flagged[currentIndex] = !flagged[currentIndex];
        saveState();
        renderAll();
      });

      $("#reviewBtn").addEventListener("click", () => {
        if (submitted) return;
        for (let i = 0; i < questions.length; i++) {
          if (answers[i] === undefined) {
            currentIndex = i;
            saveState();
            renderAll();
            return;
          }
        }
        $("#toast").textContent = "B·∫°n ƒë√£ ch·ªçn ƒë√°p √°n cho t·∫•t c·∫£ c√¢u.";
        $("#toast").classList.remove("hidden");
        setTimeout(() => $("#toast").classList.add("hidden"), 1800);
      });

      $("#submitBtn").addEventListener("click", () => {
        if (submitted) return;
        const unanswered = questions.length - Object.keys(answers).length;
        if (unanswered > 0) {
          const ok = confirm(`C√≤n ${unanswered} c√¢u ch∆∞a ch·ªçn. V·∫´n n·ªôp b√†i?`);
          if (!ok) return;
        } else {
          const ok = confirm("N·ªôp b√†i ngay?");
          if (!ok) return;
        }
        submitExam(false);
      });

      $("#resetBtn").addEventListener("click", () => {
        const ok = confirm("L√†m l·∫°i t·ª´ ƒë·∫ßu? (S·∫Ω tr·ªôn l·∫°i ƒë·ªÅ v√† x√≥a b√†i ƒëang l√†m)");
        if (!ok) return;
        resetAll();
      });
    });
  </script>

  <!-- MathJax -->
  <script>
    window.MathJax = {
      tex: {
        inlineMath: [["\\(","\\)"], ["$","$"]],
        displayMath: [["\\[","\\]"], ["$$","$$"]]
      },
      options: {
        skipHtmlTags: ["script","noscript","style","textarea","pre","code"]
      }
    };
  </script>
  <script defer src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    :root {
      --bg: #0b0f17;
      --card: #111827;
      --muted: #9ca3af;
      --text: #e5e7eb;
      --accent: #22c55e;
      --accent2: #60a5fa;
      --danger: #ef4444;
      --border: rgba(255,255,255,0.08);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background: linear-gradient(180deg, #070a10, var(--bg));
      color: var(--text);
      -webkit-tap-highlight-color: transparent;
    }
    .wrap {
      max-width: 900px;
      margin: 0 auto;
      padding: 14px 12px 22px;
      padding-bottom: calc(22px + env(safe-area-inset-bottom));
    }
    header {
      position: sticky;
      top: 0;
      z-index: 10;
      background: rgba(11,15,23,0.8);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid var(--border);
      padding: 10px 12px;
      margin: -14px -12px 12px;
    }
    .row {
      display: flex;
      gap: 10px;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
    }
    .title {
      font-size: 16px;
      font-weight: 800;
      letter-spacing: 0.2px;
    }
    .meta {
      font-size: 12px;
      color: var(--muted);
      margin-top: 4px;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border: 1px solid var(--border);
      border-radius: 999px;
      background: rgba(255,255,255,0.04);
      font-size: 12px;
      color: var(--text);
      user-select: none;
    }
    .pill b { font-weight: 800; }
    .timer {
      border-color: rgba(239,68,68,0.35);
      background: rgba(239,68,68,0.08);
    }
    .card {
      background: rgba(17,24,39,0.9);
      border: 1px solid var(--border);
      border-radius: 18px;
      box-shadow: var(--shadow);
      padding: 14px;
    }
    .qhead {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
    }
    .qid {
      font-size: 14px;
      font-weight: 900;
    }
    .qtext {
      margin-top: 10px;
      font-size: 16px;
      line-height: 1.45;
    }
    .choices {
      margin-top: 12px;
      display: grid;
      gap: 10px;
    }
    .choice {
      width: 100%;
      text-align: left;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.03);
      color: var(--text);
      border-radius: 16px;
      padding: 12px 12px;
      display: grid;
      grid-template-columns: 34px 1fr;
      gap: 10px;
      align-items: start;
      font-size: 16px;
      line-height: 1.4;
      cursor: pointer;
    }
    .choice:active { transform: scale(0.99); }
    .choice.selected {
      border-color: rgba(34,197,94,0.65);
      background: rgba(34,197,94,0.10);
    }
    .badge {
      width: 34px;
      height: 34px;
      border-radius: 12px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-weight: 900;
      background: rgba(96,165,250,0.14);
      border: 1px solid rgba(96,165,250,0.25);
      color: #dbeafe;
      user-select: none;
    }
    .ct { padding-top: 2px; }

    .nav {
      display: flex;
      gap: 10px;
      margin-top: 12px;
    }
    .btn {
      flex: 1;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.04);
      color: var(--text);
      border-radius: 16px;
      padding: 12px 12px;
      font-size: 15px;
      font-weight: 800;
      cursor: pointer;
    }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; }
    .btn.primary {
      background: rgba(34,197,94,0.16);
      border-color: rgba(34,197,94,0.30);
    }
    .btn.warn {
      background: rgba(239,68,68,0.14);
      border-color: rgba(239,68,68,0.30);
    }
    .btn.ghost { background: transparent; }
    .subbar { margin-top: 12px; display: grid; gap: 10px; }
    .mini { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; justify-content: space-between; }
    .grid {
      margin-top: 12px;
      display: grid;
      grid-template-columns: repeat(10, minmax(0, 1fr));
      gap: 8px;
    }
    @media (max-width: 420px) {
      .grid { grid-template-columns: repeat(8, minmax(0, 1fr)); }
    }
    .cell {
      border-radius: 12px;
      padding: 10px 0;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.03);
      color: var(--text);
      font-weight: 800;
      cursor: pointer;
      font-size: 13px;
    }
    .cell.active { outline: 2px solid rgba(96,165,250,0.55); }
    .cell.answered { border-color: rgba(34,197,94,0.55); background: rgba(34,197,94,0.10); }
    .cell.flagged { border-color: rgba(250,204,21,0.65); background: rgba(250,204,21,0.10); }

    .hint { color: var(--muted); font-size: 12px; margin-top: 10px; line-height: 1.35; }
    .muted { color: var(--muted); }
    .jumpInfo { margin-top: 8px; font-size: 12px; color: rgba(250,204,21,0.9); }

    .toast {
      position: fixed;
      left: 50%;
      transform: translateX(-50%);
      bottom: 16px;
      background: rgba(17,24,39,0.95);
      border: 1px solid var(--border);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      box-shadow: var(--shadow);
      z-index: 50;
      font-weight: 700;
      max-width: 92vw;
      text-align: center;
    }
    .hidden { display: none; }

    .result { margin-top: 12px; }
    .result h3 { margin: 0 0 6px; font-size: 16px; }
    .meta2 { color: var(--muted); font-size: 12px; margin-bottom: 10px; }
    .score {
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(96,165,250,0.10);
      margin-bottom: 10px;
      font-size: 14px;
    }
    .score.muted { background: rgba(255,255,255,0.03); color: var(--muted); }
    .sum { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 8px; }
    .sumrow {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.03);
      font-size: 13px;
    }
  </style>
</head>

<body>
  <header>
    <div class="row">
      <div>
        <div class="title">√în t·∫≠p GTinKT HK1 (2025-2026) - THAM KH·∫¢O 2</div>
        <div class="meta" id="meta"></div>
      </div>
      <div class="row" style="gap:8px;">
        <div class="pill timer">‚è±Ô∏è <b id="timer">--:--</b></div>
        <div class="pill">üìå <b id="progress">0/0</b></div>
      </div>
    </div>
    <div class="row" style="margin-top:8px;">
      <div class="pill">‚úÖ <span id="answered">ƒê√£ ch·ªçn: 0/0</span></div>
    </div>
  </header>

  <div class="wrap">
    <div class="card">
      <div class="qhead">
        <div class="qid" id="qId">C√¢u 1</div>
        <button class="btn ghost" id="flagBtn" type="button">‚òÜ ƒê√°nh d·∫•u</button>
      </div>
      <div class="qtext" id="qText"></div>

      <div class="choices" id="choices"></div>
      <div class="jumpInfo" id="jumpInfo"></div>

      <div class="nav">
        <button class="btn" id="prevBtn" type="button">‚¨ÖÔ∏è Tr∆∞·ªõc</button>
        <button class="btn" id="nextBtn" type="button">Sau ‚û°Ô∏è</button>
      </div>

      <div class="subbar">
        <div class="mini">
          <button class="btn" id="reviewBtn" type="button">üîé T·ªõi c√¢u ch∆∞a l√†m</button>
          <button class="btn primary" id="submitBtn" type="button">N·ªôp b√†i</button>
        </div>
        <div class="mini">
          <button class="btn warn" id="resetBtn" type="button">üîÅ L√†m l·∫°i (tr·ªôn l·∫°i ƒë·ªÅ)</button>
          <div class="hint">* Khi n·ªôp b√†i (ho·∫∑c h·∫øt gi·ªù), h·ªá th·ªëng kh√≥a ch·ªçn ƒë√°p √°n v√† hi·ªán t√≥m t·∫Øt b√†i l√†m.</div>
        </div>
      </div>
    </div>

    <div class="card" style="margin-top:12px;">
      <div class="row">
        <div style="font-weight:900;">B·∫£ng c√¢u h·ªèi</div>
        <div class="muted" style="font-size:12px;">Xanh = ƒë√£ ch·ªçn ‚Ä¢ V√†ng = ƒë√°nh d·∫•u</div>
      </div>
      <div class="grid" id="grid"></div>
      <div class="hint">
        N·∫øu tho√°t tr√¨nh duy·ªát r·ªìi m·ªü l·∫°i, b√†i v·∫´n c√≤n (ch∆∞a n·ªôp).
      </div>
    </div>

    <div class="card result hidden" id="result"></div>

  </div>

  <div class="toast hidden" id="toast"></div>
</body>
</html>
